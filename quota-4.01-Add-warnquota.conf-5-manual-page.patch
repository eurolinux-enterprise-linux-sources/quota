From 91db972ea2f4065974811655847be4d52b7caee9 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Petr=20P=C3=ADsa=C5=99?= <ppisar@redhat.com>
Date: Thu, 17 Oct 2013 17:01:07 +0200
Subject: [PATCH 3/4] Add warnquota.conf(5) manual page
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Petr Písař <ppisar@redhat.com>
---
 warnquota.8      |   5 +-
 warnquota.conf.5 | 184 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 188 insertions(+), 1 deletion(-)
 create mode 100644 warnquota.conf.5

diff --git a/warnquota.8 b/warnquota.8
index b998f19..e675f4a 100644
--- a/warnquota.8
+++ b/warnquota.8
@@ -53,7 +53,9 @@ Use
 .I configfile
 instead of
 .I /etc/warnquota.conf
-as configuration file (see example file for syntax).
+as configuration file (see
+.BR warnquota.conf (5)
+for syntax).
 .TP
 .B -a, --admins-file=\f2adminsfile\f1
 Use
@@ -108,6 +110,7 @@ default set of users
 .BR quota (1),
 .BR quotatab (5),
 .BR quotagrpadmins (5),
+.BR warnquota.conf (5),
 .BR cron (8),
 .BR edquota (8).
 .SH AUTHORS
diff --git a/warnquota.conf.5 b/warnquota.conf.5
new file mode 100644
index 0000000..56e1439
--- /dev/null
+++ b/warnquota.conf.5
@@ -0,0 +1,184 @@
+.TH WARNQUOTA.CONF 5
+.SH NAME
+warnquota.conf \- configuration for warnquota
+.SH SYNOPSIS
+.B /etc/warnquota.conf
+.SH DESCRIPTION
+The
+.B warnquota.conf
+file stores a configuration for
+.BR warnquota (8)
+tool which is used to notify an user or a group who exceeds its disk quota
+limits.
+.P
+The syntax is an option name followed by a equal sign and the option value.
+White space characters surrounding the option names and values are allowed.
+.P
+Empty lines or lines starting with a hash sign or a semicolon are ignored.
+.P
+An option value can but does not have to be quoted. The value can span
+across multiple lines provided each previous line ends with a backslash.
+.P
+Some option values can contain formatting sequences which will be expanded to
+their respective values. Following sequences are recognizes:
+.P
+.PD 0
+.TP 20
+.B %d
+domain name
+.TP
+.B %h
+host name
+.TP
+.BR "%i" ", " "%s"
+user or group name
+.TP
+.B %%
+literal % character
+.TP
+.B |
+new-line character
+.PD
+.SH OPTIONS
+.PD 0
+.TP 20
+.B CC_BEFORE
+Send to copy-carbon address only when an user has less than specified grace time
+left. Value is a number followed by a time unit. Known units are
+.IR seconds ,
+.IR minutes ,
+.IR hours ", and"
+.IR days .
+Example:
+.I 5 days
+.TP
+.B CC_TO
+An e-mail address to put into copy-carbon (CC:) recipient header. Default
+value is
+.IR root .
+.TP
+.B CHARSET
+Defines character set for sent e-mails. Default value will be current locale
+character set used when executing warnquota command, if locale is not either
+.I C
+or
+.IR POSIX .
+Otherwise none character set will be specified in the e-mails.
+.TP
+.B FROM
+Defines From: e-email address. Default value is
+.IR "support@localhost" .
+.TP
+.B GROUP_MESSAGE
+A text sent as an e-mail body if a group exceeds its limits. This option
+recognizes formatting sequences.
+.TP
+.B GROUP_SIGNATURE
+A signature text appended to notification for a group. Default value is
+a general explanation utilizing
+.B SUPPORT
+and
+.B PHONE
+values. This option recognizes formatting sequences.
+.TP
+.B LDAP_BASEDN
+Base distinguished name for LDAP queries.
+.TP
+.B LDAP_BINDDN
+Bind distinguished name for LDAP queries.
+.TP
+.B LDAP_BINDPW
+Bind password for LDAP queries.
+.TP
+.B LDAP_DEFAULT_MAIL_DOMAIN
+Default e-mail address domain of searched user if given LDAP attribute does
+not specify any.
+.TP
+.B LDAP_HOST
+LDAP server name to connect to if
+.B LDAP_URI
+is not defined.
+.TP
+.B LDAP_MAIL
+A boolean controlling if LDAP has to be used to look up an user's e-mail
+address. Possible values are
+.I true
+and
+.IR false .
+Default value is
+.IR false .
+.TP
+.B LDAP_MAIL_ATTRIBUTE
+The LDAP attribute which holds user's e-mail address.
+.TP
+.B LDAP_PORT
+LDAP server port number to connect to if
+.B LDAP_URI
+is not defined.
+.TP
+.B LDAP_SEARCH_ATTRIBUTE
+The LDAP attribute which holds user's ID to look up.
+.TP
+.B LDAP_URI
+The URL of LDAP server to use to search user's e-mail addresses. This option
+takes preference over
+.B LDAP_HOST
+and
+.BR LDAP_PORT .
+Example:
+.I ldaps://example.com:389/
+.TP
+.B MESSAGE
+A beginning of text sent as an e-mail body if a user exceeds his limits. This
+option recognizes formatting sequences.
+.TP
+.B MAIL_CMD
+The command to execute to send an e-mail. The e-mail text including all
+headers is passed to the standard input of the command. Default value is
+.IR "/usr/lib/sendmail -t" .
+.TP
+.B MAILDEV
+The device with disk quotas to exclude from sending notifications if there are
+exceeded limits. This option should identify the device where mail boxes are
+stored to prevent from bouncing the warnquota notification by local MDA due to
+no space for storing new e-mails. Special value
+.I any
+denotes all devices.
+.TP
+.B PHONE
+The telephone contact to the user support. Default value is
+.IR "(xxx) xxx-xxxx or (yyy) yyy-yyyy" .
+.TP
+.B SIGNATURE
+The end of e-mail body if a user exceeds its limits. Default value is
+a general explanation utilizing
+.B SUPPORT
+and
+.B PHONE
+values. This option recognizes formatting sequences.
+.TP
+.B SUBJECT
+The text to put into Subject: header. Default value is
+.IR "Disk Quota usage on system" .
+.TP
+.B SUPPORT
+The contact to the user support. Default value is
+.IR "support@localhost" .
+.SH EXAMPLE
+.PP
+# comment
+.RS 0
+FROM = root@example.com
+.RS 0
+SUPPORT = support@example.com
+.RS 0
+PHONE = 1234
+.SH FILES
+.PD 0 
+.TP 20 
+.B /etc/warnquota.conf
+configuration for
+.BR warnquota (8)
+.PD 
+.SH SEE ALSO
+.BR warnquota (8).
-- 
1.8.3.1

